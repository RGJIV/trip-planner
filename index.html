<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local Legend Navigator</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; padding: 20px; background: #000; color: #fff; display: flex; justify-content: center; }
        .card { background: #111; padding: 25px; border-radius: 20px; width: 100%; max-width: 480px; border: 1px solid #333; box-shadow: 0 20px 40px rgba(0,0,0,0.8); }
        h2 { color: #22c55e; margin: 0 0 10px 0; font-size: 1.5rem; letter-spacing: -0.5px; }
        .input-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-size: 0.8em; color: #888; text-transform: uppercase; font-weight: 700; }
        input { width: 100%; padding: 14px; border-radius: 12px; border: 1px solid #333; background: #000; color: #fff; box-sizing: border-box; font-size: 1rem; }
        .action-btn { width: 100%; padding: 18px; background: #22c55e; color: #000; border: none; border-radius: 12px; font-weight: 800; cursor: pointer; font-size: 1.1rem; transition: 0.2s; }
        .action-btn:active { transform: scale(0.98); background: #16a34a; }
        .share-btn { width: 100%; padding: 12px; background: transparent; color: #22c55e; border: 1px solid #22c55e; border-radius: 12px; cursor: pointer; margin-top: 12px; font-weight: 600; }
        .warning { background: #450a0a; color: #fca5a5; padding: 15px; border-radius: 12px; margin-top: 20px; font-size: 0.85em; line-height: 1.4; border: 1px solid #991b1b; }
        #status { text-align: center; color: #22c55e; font-size: 0.8em; margin-top: 10px; height: 1em; }
    </style>
</head>
<body>
    <div class="card">
        <h2>ðŸš¢ Strategic Navigator</h2>
        
        <div class="input-group">
            <label>Start (Defaulting to Cashiers)</label>
            <input type="text" id="origin" value="55 Chestnut Sq, Cashiers, NC 28717">
        </div>

        <div class="input-group">
            <label>Strategic Waypoints (Auto-injected if SE)</label>
            <input type="text" id="stops" placeholder="Optional stops (comma separated)">
        </div>

        <div class="input-group">
            <label>Final Destination</label>
            <input type="text" id="destination" value="139 Laurens St NW, Aiken, SC 29801">
        </div>

        <button class="action-btn" onclick="launch(false)">LAUNCH 110% ROUTE</button>
        <button class="share-btn" onclick="launch(true)">COPY TEXTABLE LINK</button>

        <p id="status"></p>

        <div class="warning">
            <strong>LOCAL LEGEND ADVISORY:</strong> 110% Velocity applied to mountains. Forced SC-11 bypass active for SE heading. Watch Walhalla and Aiken entry radar.
        </div>
    </div>

    <script>
        function launch(isShare) {
            const origin = document.getElementById('origin').value;
            const destination = document.getElementById('destination').value;
            const userStops = document.getElementById('stops').value;
            
            // COORD-SNAPPING: This coordinate is strictly on SC-11 near Lake Keowee
            // It "pulls" Google Maps away from the Seneca/Clemson traffic trap.
            const sc11Bypass = "34.9080,-82.9010";
            
            let waypointArray = [];
            
            // Check if heading towards typical high-friction SC zones
            const targetRegions = ["greenville", "aiken", "columbia", "charleston", "augusta", "29801", "29601"];
            const isTarget = targetRegions.some(region => destination.toLowerCase().includes(region));

            // Force SC-11 if applicable
            if (isTarget) waypointArray.push(sc11Bypass);
            
            // Add user stops
            if (userStops) {
                userStops.split(',').forEach(s => waypointArray.push(s.trim()));
            }

            // Constructing the "Directions Mode" URL
            // saddr = start, daddr = destination, +to: = waypoints
            let url = `https://www.google.com/maps?saddr=${encodeURIComponent(origin)}&daddr=${encodeURIComponent(destination)}`;
            
            if (waypointArray.length > 0) {
                url += `+to:${waypointArray.map(w => encodeURIComponent(w)).join('+to:')}`;
            }
            
            // Force Driving Mode
            url += `&dirflg=d`;

            if (isShare) {
                navigator.clipboard.writeText(url);
                document.getElementById('status').innerText = "Strategic Link Copied!";
                setTimeout(() => { document.getElementById('status').innerText = ""; }, 3000);
            } else {
                window.open(url, '_blank');
            }
        }
    </script>
</body>
</html>